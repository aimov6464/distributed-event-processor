spark {
  appName = "distributed-event-processor"
  checkpointBaseDir = "file:///tmp/distributed-event-processor/checkpoints"
}

modeA {
  checkpointDir = ${spark.checkpointBaseDir}"/mode-a"
  input {
    kafkaBootstrapServers = "localhost:9092"
    topic = "incoming-events"
    startingOffsets = "latest"
    maxOffsetsPerTrigger = 50000
  }
  watermarkDelay = "5 minutes"
  sink {
    type = "parquet" # parquet | kafka
    parquetPath = "file:///tmp/distributed-event-processor/output/parquet"
    kafkaTopic = "processed-events"
    triggerIntervalSeconds = 60
  }
}
modeB {
  windowDuration = "5 minutes"
  watermarkDelay = "10 minutes"
  triggerIntervalSeconds = 60
  sinks {
    parquet {
      enabled = true
      path = "file:///tmp/distributed-event-processor/mode-b/parquet"
      checkpointDir = ${spark.checkpointBaseDir}"/mode-b/parquet"
    }
    kafka {
      enabled = true
      topic = "mode-b-aggregates"
      outputMode = "update"
      checkpointDir = ${spark.checkpointBaseDir}"/mode-b/kafka"
    }
  }
  input {
    kafkaBootstrapServers = "localhost:9092"
    topic = "incoming-events"
    startingOffsets = "latest"
    maxOffsetsPerTrigger = 50000
  }
}
